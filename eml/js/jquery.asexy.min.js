(function(e){defaults={width:320,height:240,left:0,top:0,zoom:true,opacity:.8,func:"snake",speed:500,round:"auto"};e.fn.asexy=function(t){var n=this;this.options=e.extend({},defaults,t);if(this.options.round=="auto"){this.options.round=Math.round(this.options.round/4)}this.each(function(){var t=e(this);t.load(function(){if(t.data("asexy")){return true}else{t.data("asexy",true)}t.removeAttr("width").removeAttr("height").css({width:"",height:""});var e=t.wrap('<div class="asexy"></div>').parent();var r=t.width();var i=t.height();if(n.options.zoom){var s=n.options.width/r;var o=n.options.height/i;var u=s>o?s:o;r=u*r;i=u*i;t.attr("width",r);t.attr("height",i)}var a={width:n.options.width,height:n.options.height,position:"relative",overflow:"hidden"};var f=["margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","border-top-width","border-right-width","border-bottom-width","border-left-width","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","z-index","float","clear","cursor"];var l=f.length;for(var c=0;c<l;c++)a[f[c]]=t.css(f[c]);var h=n.options.left;var d=n.options.top;if(h=="center"){h=-(r/2-n.options.width/2)}if(d=="center"){d=-(i/2-n.options.height/2)}t.css({top:d,left:h,padding:0,margin:0,border:0,position:"absolute",opacity:n.options.opacity});e.css(a).data("asexy",{img:{width:r,height:i},div:{width:n.options.width,height:n.options.height},def:{top:d,left:h},diff:{width:Math.round(r-n.options.width),height:Math.round(i-n.options.height)}});e.hover(function(){n.go(this)},function(){n.back(this)})});var r=t.attr("src");t.attr("src","");t.attr("src",r);return this});this.go=function(t){e(t).find("img").fadeTo(10,1);switch(n.options.func){case"x":n.go.x(t);break;case"vertical":n.go.vertical(t);break;case"horizontal":n.go.horizontal(t);break;case"linear":n.go.linear(t);break;case"zigzag":n.go.zigzag(t);break;case"snake":default:n.go.snake(t);break}};this.go.linear=function(t){var r=e(t);var i=r.find("img");var s=r.data("asexy");var o=i.css("left");var u=i.css("top");var a=n.options.speed;if(s.img.width/s.div.width>=s.img.height/s.div.height){i.animate({left:-s.diff.width},a)}else{i.animate({top:-s.diff.height},a)}};this.go.snake=function(t){var r=e(t);var s=r.find("img");var o=r.data("asexy");var u=s.css("left");var a=s.css("top");var f=Math.ceil(o.img.height/o.div.height);f=f>1?f:2;var l=n.options.speed;for(i=1;i<f;i++){var c=i*o.div.height;if(o.diff.width){if(i%2==0){s.animate({left:0},l)}else{s.animate({left:-o.diff.width},l)}}if(o.diff.height+o.div.height-c<n.options.round){break}if(o.diff.height){if(c>o.diff.height){vspeed=Math.round(o.div.height/l*2*(c-o.diff.height));c=o.diff.height}else{vspeed=l}s.animate({top:-c},vspeed)}}};this.go.zigzag=function(t){var r=e(t);var s=r.find("img");var o=r.data("asexy");var u=s.css("left");var a=s.css("top");var f=Math.ceil(o.img.height/o.div.height);f=f>1?f:2;var l=n.options.speed;for(i=1;i<=f;i++){var c=i*o.div.height;if(o.diff.width){s.animate({left:-o.diff.width},l)}if(o.diff.height+o.div.height-c<n.options.round){break}if(o.diff.height){if(c>o.diff.height){c=o.diff.height}if(i!=f){s.animate({top:-c,left:0},l)}}}};this.go.horizontal=function(t){var r=e(t);var i=r.find("img");var s=r.data("asexy");var o=i.css("left");var u=i.css("top");var a=n.options.speed;i.animate({left:-s.diff.width},a).animate({left:0},a)};this.go.vertical=function(t){var r=e(t);var i=r.find("img");var s=r.data("asexy");var o=i.css("left");var u=i.css("top");var a=n.options.speed;i.animate({top:-s.diff.height},a).animate({top:0},a/6)};this.go.x=function(t){var r=e(t);var i=r.find("img");var s=r.data("asexy");var o=i.css("left");var u=i.css("top");var a=n.options.speed;i.animate({left:-s.diff.width,top:-s.diff.height},a).animate({left:-s.diff.width,top:0},a).animate({left:0,top:-s.diff.height},a).animate({left:0,top:0},a)};this.back=function(t){var n=e(t);var r=n.find("img");var i=n.data("asexy");r.stop(true);r.animate({top:"-100px",left:i.def.left,opacity:0.2},0).animate({top:i.def.top,opacity:.8},500)};return this}})(jQuery)